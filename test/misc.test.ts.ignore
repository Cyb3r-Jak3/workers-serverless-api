import { GravatarHash } from '../src/misc'
import makeServiceWorkerEnv from 'service-worker-mock'

declare var global: any

describe('Test Misc', () => {
    beforeEach(() => {
        Object.assign(global, makeServiceWorkerEnv())
        jest.resetModules()
    })

    test('Gravatar Hash', async () => {
        const result = await GravatarHash(
            new Request('/', {
                method: 'POST',
                body: JSON.stringify({ email: 'git@cyberjake.xyz' }),
            })
        )
        expect(result.status).toEqual(200)
    })
})
